(function(t){function e(e){for(var i,r,o=e[0],l=e[1],c=e[2],f=0,d=[];f<o.length;f++)r=o[f],s[r]&&d.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},s={popup:0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;a.push([1,"chunk-vendors"]),n()})({"025e":function(t,e,n){"use strict";n.d(e,"a",function(){return a});n("20d6");var i=n("f499"),s=n.n(i),a={get:function(t){var e=localStorage.getItem(t);return e?JSON.parse(e):""},set:function(t,e){localStorage.setItem(t,s()(e))},addItem:function(t,e){var n=this.get(t)||[];return n.unshift(e),this.set(t,n),n},deleteItemBy:function(t,e,n){var i=this.get(t);if(i&&i.length){var s=i.findIndex(function(t){return t[e]===n});s>-1&&i.splice(s,1),this.set(t,i)}return i}}},"0471":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rule-list"},[t.list.length?[n("div",{staticClass:"tags"},[n("a",{class:{active:""===t.activeTag},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.filterListByTag("")}}},[t._v(t._s(t.$t("All"))+"("+t._s(t.list.length)+")")]),t._l(t.tags,function(e,i){return n("a",{class:{active:t.activeTag===i},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.filterListByTag(i)}}},[t._v(t._s(i)+"("+t._s(e)+")")])})],2),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{width:"30px"}},[t._v(t._s(t.$t("Enable")))]),n("th",[t._v(t._s(t.$t("Domain/URL")))]),n("th",[t._v("Target")]),n("th",[t._v(t._s(t.$t("Tags")))]),t.action?n("th",{staticClass:"align-r"},[t._v(t._s(t.$t("Order")))]):t._e(),n("th",[t._v(t._s(t.$t("Note")))]),t.action?n("th",{staticClass:"align-r"}):t._e()])]),n("tbody",t._l(t.showList,function(e){return n("tr",[n("td",[n("el-checkbox",{on:{change:function(n){return t.statusChanged(e)}},model:{value:e.enable,callback:function(n){t.$set(e,"enable",n)},expression:"it.enable"}})],1),n("td",{staticClass:"title"},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.statusChanged(e,!0)}}},[t._v(t._s(e.domain))])]),n("td",[t._v(t._s(e.target))]),n("td",[t._v(t._s(e.tags.join(", ")))]),t.action?n("td",{staticClass:"align-r"},[t._v(t._s(e.order))]):t._e(),n("td",[t._v(t._s(e.note))]),t.action?n("td",[n("div",{staticClass:"actions align-r"},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.deleteItem(e.id)}}},[t._v(t._s(t.$t("Delete")))]),n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.editItem(e.id)}}},[t._v(t._s(t.$t("Edit")))])])]):t._e()])}),0)]),t.action?n("div",{staticClass:"list-actions"},[n("el-button",{attrs:{size:"mini"},on:{click:t.exportList}},[t._v(t._s(t.$t("Export")))]),t.exporting?n("div",{staticClass:"export-text"},[n("p",[t._v(t._s(t.$t("Copy and save the rules below, then you can import by the Bulk-Add next time")))]),n("textarea",{attrs:{rows:"5",readonly:""},on:{focus:t.selectExportText}},[t._v(t._s(t.exportText))])]):t._e()],1):t._e()]:n("el-alert",{attrs:{closable:!1}},[t._t("empty-note",[n("p",[t._v(t._s(t.$t("Rules not found")))])])],2)],2)},s=[],a=n("5176"),r=n.n(a),o=(n("55dd"),n("a4bb")),l=n.n(o),c=(n("20d6"),n("7514"),n("ac6a"),n("025e")),u={props:{action:{type:Boolean,default:!0}},data:function(){return{activeTag:"",list:c["a"].get("rules")||[],exporting:!1}},computed:{showList:function(){var t=this;return this.activeTag?this.list.filter(function(e){return e.tags.indexOf(t.activeTag)>-1}):this.list},tags:function(){var t={};return this.list.forEach(function(e){e.tags.forEach(function(e){t[e]?t[e]+=1:t[e]=1})}),t},exportText:function(){var t=[];return this.list.forEach(function(e){t.push("".concat(e.domain," ").concat(e.target," ").concat(e.tags.join(",")," ").concat(e.order," ").concat(e.note))}),t.join("\n")}},watch:{list:function(){this.syncList()}},methods:{exportList:function(){this.exporting=!this.exporting},selectExportText:function(t){t.target.select()},syncList:function(){c["a"].set("rules",this.list),this.setProxy()},statusChanged:function(t,e){if(e&&(t.enable=!t.enable),t.enable){var n=this.list.find(function(e){return e.id!==t.id&&e.enable&&e.domain===t.domain});n&&(n.enable=!1)}this.syncList()},filterListByTag:function(t){if(this.activeTag===t){var e={},n=this.showList.findIndex(function(t){return!t.enable});this.showList.forEach(function(t){t.enable=n>-1,n>-1&&(e[t.domain]=t.id)}),l()(e).length&&this.list.forEach(function(t){e[t.domain]!==t.id&&(t.enable=!1)}),this.syncList()}else this.activeTag=t},sortList:function(){this.list=this.list.sort(function(t,e){return e.order-t.order})},deleteItem:function(t){var e=this;this.$confirm(this.$t("Are you sure you want to delete this rule?"),this.$t("Confirm")).then(function(){var n=e.list.findIndex(function(e){return t===e.id});n>-1&&e.list.splice(n,1)})},editItem:function(t){var e=this.list.findIndex(function(e){return t===e.id});e>-1&&this.$emit("edit",this.list[e])},addItem:function(t){this.list.unshift(r()(t,{id:(new Date).getTime()+"-0",enable:!1})),this.sortList()},addItems:function(t){this.list=this.list.concat(t),this.sortList()},setItem:function(t){var e=this.list.findIndex(function(e){return t.id===e.id});e>-1?(this.$set(this.list,e,t),this.sortList()):this.addItem(t)},getEnabledHosts:function(){return this.list.filter(function(t){return t.enable})},setProxy:function(t){if(void 0===t){if(t=c["a"].get("enable"),""===t)t=!0;else if(!1===t)return}else c["a"].set("enable",t);var e=t?{mode:"pac_script",pacScript:{data:this.getPacScript()}}:{mode:"system"};window.chrome.proxy.settings.set({scope:"regular",value:e})},getPacScript:function(){for(var t="",e=this.list.filter(function(t){return t.enable}),n=0;n<e.length;n++){var i=e[n];t+=0===n?"if":"else if",i.domain.indexOf("/")>0?t+='(shExpMatch(url, "http://'+i.domain+'") || shExpMatch(url, "https://'+i.domain+'"))':i.domain.indexOf("*")>-1?t+='(shExpMatch(host, "'+i.domain+'"))':t+='(host == "'+i.domain+'")',t+='{return "PROXY '+i.target+'; DIRECT";}\n'}t&&(t+='else { return "DIRECT"; }');var s='\nfunction FindProxyForURL(url,host){\n  if(shExpMatch(url, "http:*") || shExpMatch(url, "https:*")){\n    '.concat(t,'\n  } else {\n    return "DIRECT";\n  }\n}\n      ');return s}}},f=u,d=(n("cd96"),n("2877")),h=Object(d["a"])(f,i,s,!1,null,null,null);e["a"]=h.exports},"0a3d":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popup-page",attrs:{id:"app"}},[n("h1",[t._v("Simple Proxy"),n("span",[n("el-button",{attrs:{size:"mini"},on:{click:t.gotoSettingPage}},[t._v(t._s(t.$t("Setting")))])],1),n("small",[n("el-switch",{attrs:{"active-text":t.$t("Enable")},model:{value:t.enable,callback:function(e){t.enable=e},expression:"enable"}})],1)]),n("rule-list",{ref:"list",attrs:{action:!1}},[n("p",{attrs:{slot:"empty-note"},slot:"empty-note"},[t._v(t._s(t.$t("Rules not found, "))),n("a",{attrs:{href:"/setting.html",target:"_blank"}},[t._v(t._s(t.$t("Click to Add")))])])])],1)},a=[],r=n("025e"),o=n("0471"),l={name:"app",components:{RuleList:o["a"]},data:function(){var t=r["a"].get("enable");return{enable:""===t||t}},watch:{enable:function(){this.$refs.list.setProxy(this.enable)}},methods:{gotoSettingPage:function(){window.open("/setting.html")}}},c=l,u=(n("11aa"),n("2877")),f=Object(u["a"])(c,s,a,!1,null,null,null),d=f.exports,h=n("a925"),p=n("2ab5"),v=n("5c96"),g=n.n(v);n("0fae"),n("e008");i["default"].config.productionTip=!1,i["default"].use(h["a"]),i["default"].use(g.a,{size:"small",zIndex:3e3});var m=new h["a"]({locale:"zh-CN",messages:p["a"]});new i["default"]({i18n:m,render:function(t){return t(d)}}).$mount("#app")},1:function(t,e,n){t.exports=n("0a3d")},"11aa":function(t,e,n){"use strict";var i=n("21ff"),s=n.n(i);s.a},"21ff":function(t,e,n){},"2ab5":function(t,e,n){"use strict";e["a"]={"zh-CN":{Setting:"设置",Enable:"启用","Rules not found, ":"没有找到任何代理规则，","Rules not found":"还没有添加任何代理规则","Click to Add":"点击添加","Domain/URL":"域名/URL",Tags:"标签",Order:"排序",Note:"备注",All:"全部",Delete:"删除",Edit:"编辑",Confirm:"提示","Are you sure you want to delete this rule?":"确定要删除该配置项吗？","Add Rules":"添加规则",Add:"添加","Bulk Add":"批量添加","Tags For All Rules":"统一设置标签",Preview:"预览","Can not get any rules, please check your input rules format":"没有解析到任何代理规则，请注意检查格式","Sure to Add":"确定添加","Sure to Save":"确定保存",Cancel:"取消",Export:"导出","All Rules":"所有规则","Copy and save the rules below, then you can import by the Bulk-Add next time":"将下面内容复制保存起来，下次可通过左侧的批量添加导入。"}}},a34b:function(t,e,n){},cd96:function(t,e,n){"use strict";var i=n("a34b"),s=n.n(i);s.a},e008:function(t,e,n){}});